language: python

matrix:
  include:
    - name: "Python 2.7"
      python: 2.7
      before_install:
        - pip install Cheetah
      script:
        - python -m compileall -l . -l plugin -l plugin/backport -l plugin/controllers -l plugin/controllers/models
        - cheetah compile -R plugin
        - python testsuite/evil_eval.py
      
    - name: "Python 3.8"
      python: 3.8
      before_install:
        - pip install Cheetah3
        - pip install --upgrade pip autopep8
      script:
        - python -m compileall -l . -r 10 -q
        - cheetah compile -R plugin
        - python testsuite/evil_eval.py
      after_success:
        - ./CI/build.sh

#deploy:
#  provider: pages
#  local_dir: Rel
#  github_token: $GITHUB_TOKEN
#  skip_cleanup: true
#  target_branch: gh-pages
#  on:
#    branch: master
#    condition: $TRAVIS_PYTHON_VERSION == "2.7"*
